# Online School Management System Requirements Document

## 1. Application Description

### 1.1 Application Name
Online School Management System

### 1.2 Application Purpose
A comprehensive school management system for educational institutions. Features include school management, academic structure setup (class, section, subject, lesson), teacher-subject-class-section mapping, question bank management with lesson-level tracking, user management with school-based data isolation.\n
## 2. User Roles\n
### 2.1 Admin\n- Complete system administration
- School management (create, edit, view schools)\n- User account creation and management
- New user approval management
- Role-based Access Control setup
- System configurations\n- Permission management
- User profile editing and suspension management
- **Cross-school visibility**: Admin can view and manage all schools and users across the entire system
- **Full management rights**: Create, edit, suspend, delete all users and schools

### 2.2 Principal
- **Academic Management** (within assigned school only):
  - Class creation\n  - Section creation
  - Subject creation (class-wise)
  - Lesson creation (subject-wise)
  - Student class-section mapping
- **Teacher Management** (within assigned school only):
  - View teacher accounts
  - Teacher-subject-class-section mapping\n  - View class-section overview with assigned teachers per subject
  - Edit teacher profiles
- **Student Management** (within assigned school only):
  - View students list
  - View student class-section assignments
- **Question Bank Management** (within assigned school only):
  - Create and manage questions with lesson-level tracking
  - View question bank analytics
- Profile editing capability
- Linked to specific school from school master list
- **School-based isolation**: Can only view and manage users (teachers and students) from their assigned school
- **Visibility Rules**:
  - ✅ Can view: Teachers from their own school, Students from their own school
  - ❌ Cannot view: Users from other schools
\n### 2.3 Teacher
- View assigned classes, sections, and subjects
- View students of assigned sections only
- **Question Bank Access**:
  - Create questions for assigned subjects and lessons
  - View questions filtered by assigned subjects
- Profile editing capability
- Linked to specific school from school master list
- **School-based isolation**: Can only view and interact with students from their assigned sections
- **Visibility Rules**:
  - ✅ Can view: Students from their assigned sections
  - ❌ Cannot view: Principal (even from the same school), Other teachers (even from the same school), Users from other schools

### 2.4 Student
- View my class, section, subjects, and teachers
- Profile editing capability
- Linked to specific school from school master list
- **School-based isolation**: Can only view personal information from their assigned school
- **Visibility Rules**:
  - ✅ Can view: Only their own profile details, Personal information, and assigned content
  - ❌ Cannot view: Other students, Teachers, Principal, Admin\n
### 2.5 User Profile Information
All users (Admin, Principal, Teacher, Student) will have the following profile information:
- User name
- Email address
- Role\n- School name (mandatory field, selected from dropdown list populated from School Master)
- Contact number
- Profile picture (optional)\n- Account status (Pending Approval/Active/Suspended)
\n## 3. School Management Module

### 3.1 School Master
Admin can create and manage schools with the following details:
\n#### 3.1.1 School Information Fields
- School Name (unique, mandatory)
- Assignment (optional, selected from existing School Name)\n- School Address (mandatory)
- Contact Number (mandatory)
- Email Address (mandatory)
- School Code/ID (unique identifier, auto-generated by system)
- Affiliation/Board (mandatory, e.g., State Board, CBSE, ICSE, etc.)
- Class Range (mandatory):\n  - Class From (e.g., 1, 6, 9)
  - Class To (e.g., 5, 10, 12)
- Subjects (mandatory, list of subjects offered by the school)
- Principal Name (mandatory, selected from existing user list with Principal role)
\n#### 3.1.2 School Management Features
- Create new school with all mandatory fields
- Edit existing school information
- View complete school list\n- Search and filter schools by name, code, or affiliation
- Auto-generate unique School Code/ID upon school creation
- Link Principal from existing user database (dropdown selection)
- Define subject list for each school
- Assign school to another school via Assignment field (optional)
\n#### 3.1.3 School-User Relationship
- When creating/editing user accounts, Admin selects school from dropdown (populated from School Master)
- Principal, Teacher, and Student roles must be linked to a school
- Admin role is not linked to any specific school
- One Principal can be assigned to only one school
- Multiple Teachers and Students can be assigned to same school

## 4. School-Based Data Isolation

### 4.1 Isolation Principle
- Users from same school form an isolated group
- Within each school group, Principal, Teachers, and Students can only see and interact with users based on their role-specific visibility rules
- Admin has cross-school visibility and can manage all schools\n
### 4.2 Isolation Implementation
\n#### 4.2.1 User Visibility Rules
- **Admin**: Can view all users from all schools
- **Principal**: Can only view teachers and students from assigned school
- **Teacher**: Can only view students from assigned sections (cannot view Principal or other teachers)
- **Student**: Can only view their own profile and personal information (cannot view other students, teachers, or Principal)

#### 4.2.2 Search and Filter
- All user lists are automatically filtered by school and role-based visibility rules
- Search functionality respects school-based isolation and role permissions
- Dropdown lists and selection options show only school-relevant and role-appropriate data

### 4.3 School Group Interconnection
- All users within same school are interconnected based on role-specific visibility\n- Principal oversees all teachers and students in their school
- Teachers can view student lists within their assigned sections (but not Principal or other teachers)
- Students can only access their own information\n- Communication and notifications are school-scoped and role-appropriate

## 5. Principal Dashboard - Academic Management Module

### 5.1 Principal Dashboard Overview
After Principal login, the dashboard displays four main cards:
- **Academic Management**: Manage academic structure (classes, sections, subjects, lessons, student mapping)
- **Teachers**: Manage teacher accounts and teacher-subject-class-section mapping\n- **Students**: View and manage students\n- **Question Bank**: Manage exam questions with lesson-level tracking
\n**UI Language Requirement**: All card titles, labels, and UI text on Principal Dashboard must be displayed in English only. Card titles should be 'Academic Management', 'Teachers', 'Students', and 'Question Bank' (not in Tamil or any other language).

### 5.2 Academic Card - Academic Structure Management

#### 5.2.1 Class Creation
- Principal can create classes for their assigned school
- Class information fields:\n  - Class Name (e.g., Class 6, Class 7, Class 8, etc.)
  - Class Code (auto-generated or manual entry)
  - Academic Year (e.g., 2024-2025)\n- Class list view with edit and delete options
- Classes are school-specific and isolated\n
#### 5.2.2 Section Creation
- Principal can create sections for each class
- Section information fields:\n  - Section Name (e.g., Section A, Section B, Section C)
  - Class (dropdown selection from created classes)
  - Maximum Students (optional)
- Section list view with class-wise filtering
- Sections are linked to specific classes within the school

#### 5.2.3 Subject Creation (Class-wise)
- Principal can create subjects for each class
- Subject information fields:
  - Subject Name (e.g., Mathematics, Science, English)\n  - Class (dropdown selection from created classes)
  - Subject Code (auto-generated or manual entry)
  - Subject Type (Core/Elective/Optional)
- Subject list view with class-wise filtering
- Subjects are class-specific and school-specific

#### 5.2.4 Lesson Creation (Subject-wise)
- Principal can create lessons for each subject
- Lesson information fields:
  - Lesson Name (mandatory, e.g., 'Algebra Basics', 'Photosynthesis', 'Shakespeare Introduction')
  - Subject (dropdown selection from created subjects)
  - Lesson Code (optional, e.g., 'MATH-L01', 'SCI-L05')
- Lesson list view with subject-wise filtering
- Lessons are subject-specific and school-specific
- **Database Structure**:
  - Table name: lessons
  - Columns:\n    - id (UUID, Primary Key)
    - subject_id (Foreign Key → subjects.id)
    - lesson_name (Text, required)
    - lesson_code (Varchar, optional)
    - created_at (Timestamp)\n    - updated_at (Timestamp)
\n#### 5.2.5 Student Class-Section Mapping
- Principal can assign students to specific class and section
- **Note**: Student accounts are already created via Sign-Up process, only class-section assignment is done here
- Mapping interface:
  - Student selection (dropdown or search from existing students in the school)
  - Class selection (dropdown)\n  - Section selection (dropdown, filtered by selected class)
  - Academic Year\n- Bulk assignment option for multiple students
- View current class-section assignments with edit and reassign options
- Students without class-section assignment are listed separately for easy identification

### 5.3 Teachers Card - Teacher Management

#### 5.3.1 Teacher Accounts
- **Note**: Teacher accounts are already created via Sign-Up process and mapped to school by Admin
- Principal can view all teachers in their assigned school
- Teacher list displays:
  - Teacher Name
  - Subject specialization
  - Phone Number
  - Account Status (Active/Pending/Suspended)
  - **Edit Action**: Edit button or pencil icon for each teacher row to enable profile editing
- **Enhanced Search and Filter Functionality**:
  - Text search bar for searching by teacher name, phone number, or email
  - Additional dropdown filters:\n    - Subject filter (dropdown showing all subjects in the school)
    - Status filter (dropdown with options: All, Active, Pending, Suspended)
- Combined search capability (text search + subject filter + status filter)
  - Real-time filtering as user types or selects filter options
  - Clear filters button to reset all search and filter criteria

#### 5.3.2 Teacher-Subject-Class-Section Mapping (Heart of the System)
- Principal assigns teachers to specific subjects, classes, and sections
- Mapping interface:
  - Teacher selection (dropdown from school teachers)
  - Subject selection (dropdown from school subjects)
  - Class selection (dropdown from school classes)
  - Section selection (multi-select, filtered by selected class)
- One teacher can be assigned to multiple subject-class-section combinations
- View current teacher assignments with edit and delete options
- **This mapping is the core of the system**: It determines which students a teacher can view\n
#### 5.3.3 Class-Section Overview
- Principal can view class-section overview showing:
  - Class and Section name
  - Assigned Teachers per Subject
  - Students List in that section
- Detailed view with subject-wise teacher assignments
- Student count per section
- Quick access to edit teacher assignments or student mappings

### 5.4 Students Card - Student Management
- Principal can view all students in their assigned school
- Student list displays:
  - Student Name
  - Class and Section
  - Phone Number
  - Account Status (Active/Pending/Suspended)\n- **Enhanced Search Functionality**: \n  - Text search bar for searching by name, phone, or email
  - Additional dropdown filters for Class and Section
  - Combined search capability (text search + class filter + section filter)
- Filter and search options by class, section, or name
- Click on student to view detailed profile and academic records
\n### 5.5 Question Bank Card - Question Management
- Principal can access Question Bank management interface
- Create, edit, and delete questions for exam preparation
- View all questions with lesson-level filtering
- Analytics dashboard for question bank performance
\n## 6. Question Bank Module

### 6.1 Question Bank Overview\n- Centralized repository for exam questions
- Questions are organized by Class, Subject, and Lesson
- Support for multiple question types (Multiple Choice, True/False, Short Answer, Essay)
- Difficulty levels (Easy, Medium, Hard)\n- Marks allocation per question
- Lesson-level tracking for performance analytics

### 6.2 Question Bank Table Structure
\n#### 6.2.1 Database Schema
**Table name**: question_bank

**Columns**:
- id (UUID, Primary Key)
- school_id (Foreign Key → schools.id)
- class_id (Foreign Key → classes.id)
- subject_id (Foreign Key → subjects.id)
- lesson_id (Foreign Key → lessons.id, **NEW FIELD**)
- bank_name (Varchar, auto-generated, **NEW FIELD**)
  - Format: Class_Subject (e.g., 'Class10_English', 'Class6_Mathematics')
  - Auto-generated by combining selected Class name and Subject name
- question_text (Text, required)
- question_type (Enum: Multiple Choice, True/False, Short Answer, Essay)
- marks (Integer, required)
- difficulty (Enum: Easy, Medium, Hard)
- options (JSON array, required for Multiple Choice and True/False)
- correct_answer (Text, required)\n- created_by (Foreign Key → users.id)
- created_at (Timestamp)
- updated_at (Timestamp)\n
#### 6.2.2 Foreign Key Relationships
- school_id → schools.id (CASCADE on delete)
- class_id → classes.id (CASCADE on delete)
- subject_id → subjects.id (CASCADE on delete)
- lesson_id → lessons.id (CASCADE on delete)
- created_by → users.id (SET NULL on delete)

### 6.3 Question Creation Form
\n#### 6.3.1 Form Field Order
The question creation form displays fields in the following order:
1. **Class** (Dropdown, required)
   - Populated from classes table filtered by school_id
   - Selection triggers Subject dropdown population
2. **Subject** (Dropdown, required)
   - Populated from subjects table filtered by selected class_id
   - Selection triggers Lesson dropdown population
3. **Lesson** (Dropdown, required, **NEW FIELD**)
   - Populated from lessons table filtered by selected subject_id
   - Displays lesson_name with optional lesson_code
4. **Question** (Text area, required)
   - Enter question text
5. **Question Type** (Dropdown, required)\n   - Options: Multiple Choice, True/False, Short Answer, Essay
   - Selection determines whether Options field is displayed
6. **Marks** (Number input, required)
   - Integer value (e.g., 1, 2, 5, 10)
7. **Difficulty** (Dropdown, required)
   - Options: Easy, Medium, Hard
8. **Options** (Dynamic fields, conditional)\n   - Displayed only for Multiple Choice and True/False question types
   - Four option input fields (Option1, Option 2, Option 3, Option 4)
   - All four options displayed simultaneously (no'Add Option' button)
9. **Correct Answer** (Text input or dropdown, required)
   - For Multiple Choice: Dropdown selection from entered options
   - For True/False: Dropdown with True/False options
   - For Short Answer/Essay: Text input field
\n#### 6.3.2 Form Behavior
- **Cascading Dropdowns**: Class → Subject → Lesson\n- **Auto-generation**: bank_name field is auto-generated upon form submission by combining selected Class name and Subject name (e.g., 'Class10_English')
- **Validation**: All required fields must be filled before submission
- **Form Persistence Issue Fix**: After submitting a question, the form should clear all fields except Class and Subject, which should remain populated to allow immediate entry of a new question for the same Class and Subject
- **Options Display**: All four option fields (Option 1, Option 2, Option 3, Option 4) are displayed simultaneously when Question Type is Multiple Choice or True/False
\n#### 6.3.3 Form Actions
- **Add Button**: Saves the question to question_bank table
- **Cancel Button**: Clears the form and closes the dialog
- **Validation Messages**: Display error messages for missing required fields or invalid inputs
\n### 6.4 Question Bank List View

#### 6.4.1 Display Columns
- Question (truncated text with expand option)
- Class\n- Subject
- Lesson(**NEW COLUMN**)
- Question Type
- Difficulty
- Marks
- Actions (Edit, Delete)

#### 6.4.2 Filter and Search Options
- Text search by question text
- Filter by Class (dropdown)
- Filter by Subject (dropdown, filtered by selected Class)
- Filter by Lesson (dropdown, filtered by selected Subject, **NEW FILTER**)
- Filter by Question Type (dropdown)\n- Filter by Difficulty (dropdown)
- Combined filtering capability
- Clear filters button

#### 6.4.3 Sorting Options
- Sort by Class
- Sort by Subject
- Sort by Lesson (**NEW SORT OPTION**)
- Sort by Difficulty
- Sort by Marks
- Sort by Created Date

### 6.5 Question Bank Analytics (Future Scope)

#### 6.5.1 Lesson-Level Performance Analysis
- **Purpose**: Enable performance analysis at lesson level for students
- **Data Storage**: lesson_id is stored with each question to enable future analytics
- **Future Reports**:
  - Lesson-wise accuracy of students (e.g., 'Students scored 75% on Lesson: Algebra Basics')
  - Lesson-wise difficulty analysis (e.g., 'Lesson: Photosynthesis has 60% Hard questions')
  - Lesson-wise question distribution (e.g., 'Lesson: Shakespeare Introduction has 10 Multiple Choice, 5 Short Answer questions')
  - Student performance comparison across lessons
  - Class-wise lesson performance trends

#### 6.5.2 Analytics Dashboard Components
- Lesson performance heatmap
- Student accuracy by lesson chart
- Question difficulty distribution by lesson
- Lesson completion rates
- Comparative analysis across classes and subjects

### 6.6 Database Migration Script

#### 6.6.1 Migration Steps
1. **Create Lessons Table** (if not existing):
```sql
CREATE TABLE IF NOT EXISTS lessons (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  subject_id UUID NOT NULL REFERENCES subjects(id) ON DELETE CASCADE,
  lesson_name TEXT NOT NULL,
  lesson_code VARCHAR(50),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

2. **Alter Question Bank Table**:
```sql
ALTER TABLE question_bank\nADD COLUMN IF NOT EXISTS bank_name VARCHAR(100),
ADD COLUMN IF NOT EXISTS lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE;\n```

3. **Create Index for Performance**:
```sql
CREATE INDEX IF NOT EXISTS idx_lessons_subject_id ON lessons(subject_id);
CREATE INDEX IF NOT EXISTS idx_question_bank_lesson_id ON question_bank(lesson_id);
CREATE INDEX IF NOT EXISTS idx_question_bank_bank_name ON question_bank(bank_name);
```

4. **Add Foreign Key Constraint**:
```sql
ALTER TABLE question_bank\nADD CONSTRAINT fk_question_bank_lesson\nFOREIGN KEY (lesson_id) REFERENCES lessons(id) ON DELETE CASCADE;
```

5. **Backfill bank_name for Existing Records** (if applicable):
```sql
UPDATE question_bank
SET bank_name = CONCAT(classes.class_name, '_', subjects.subject_name)\nFROM classes, subjects
WHERE question_bank.class_id = classes.id\nAND question_bank.subject_id = subjects.id\nAND question_bank.bank_name IS NULL;
```\n
#### 6.6.2 Migration Validation
- Verify lessons table creation
- Verify foreign key constraints are intact
- Verify indexes are created
- Test cascading delete behavior
- Validate bank_name auto-generation logic

## 7. Teacher Dashboard and Functions

### 7.1 Teacher Login - Dashboard Overview
After Teacher login, the dashboard displays:
- **Assigned Classes**: List of classes assigned to the teacher
- **Assigned Sections**: List of sections assigned to the teacher
- **Assigned Subjects**: List of subjects assigned to the teacher
- **Students of Assigned Sections**: List of students in the assigned sections only
- **Question Bank**: Access to create questions for assigned subjects and lessons
\n### 7.2 Teacher Functions

#### 7.2.1 View Assigned Classes, Sections, and Subjects
- Teacher can view all their assigned classes, sections, and subjects
- Dashboard displays summary cards with counts
- Detailed view with class-section-subject combinations
\n#### 7.2.2 View Students of Assigned Sections Only
- Teacher can only view students who are in their assigned sections
- Student list displays:
  - Student Name
  - Class and Section\n  - Roll Number
  - Contact Number
- Filter and search options by class, section, or name
- **Visibility Rule**: Teacher cannot view students from other sections or other teachers\n
#### 7.2.3 Question Bank Access
- Teacher can create questions for their assigned subjects and lessons
- Question creation form follows same field order as Principal (Class → Subject → Lesson → Question → Question Type → Marks → Difficulty → Options → Correct Answer)
- Teacher can only view and edit questions they created
- Questions are automatically filtered by teacher's assigned subjects\n
#### 7.2.4 Profile Settings
- Teacher can edit their own profile information
- View school details (read-only)
\n## 8. Student Dashboard and Functions

### 8.1 Student Login - Dashboard Overview
After Student login, the dashboard displays:
- **My Class**: Student's assigned class
- **My Section**: Student's assigned section
- **My Subjects**: List of subjects for the student's class
- **My Teachers**: List of teachers assigned to the student's class and section
\n### 8.2 Student Functions

#### 8.2.1 View My Class and Section
- Student can view their assigned class and section
- Display class and section name prominently on dashboard
\n#### 8.2.2 View My Subjects
- Student can view all subjects for their class
- Subject list displays:
  - Subject Name
  - Subject Code
  - Subject Type (Core/Elective/Optional)\n\n#### 8.2.3 View My Teachers
- Student can view all teachers assigned to their class and section
- Teacher list displays:\n  - Teacher Name
  - Subject\n  - Contact Information (if available)
\n#### 8.2.4 Profile Settings
- Student can edit their own profile information
- View school details (read-only)\n
## 9. Key Features\n
### 9.1 User Registration and Approval Workflow
- When a new user creates an account (signup), they will be assigned 'Pending Approval' status
- **School Name Field**: During registration, user must select school from dropdown list (populated from School Master created by Admin)
- New users with 'Pending Approval' status will be displayed separately in'Pending Users' list (not in Active Users list)
- Admin must review and approve new user accounts
- Only after Admin approval, user status changes to 'Active' and they are moved to Active Users list
- This prevents unauthorized users from accessing the system
- **Pending Users Display Enhancement**: In the Pending Users section, the School Name column must display the actual school name that the user selected during registration (not a dash or empty value)

### 9.2 Password Reset/Recovery Feature
- **Forgot Password Link**: Available on login page for all users
- **Password Reset Process**:
  - User clicks 'Forgot Password' link on login page
  - System prompts user to enter registered email address
  - System sends password reset link to the registered email
  - Reset link expires after 24 hours for security
  - User clicks the link and is redirected to password reset page
  - User enters new password (with confirmation field)
  - Password requirements: minimum 8 characters, at least one uppercase, one lowercase, one number
  - System validates and updates the password
  - User receives confirmation email about password change
  - User can now login with new password
- **Security Features**:
  - Reset link is single-use only
  - Link expires after 24 hours
  - Email verification required\n  - Password strength validation
  - Notification email sent after successful password change

### 9.3 Admin Functions
- Create and manage schools in School Master
- Create user accounts for all roles\n- Assign school to each user during account creation (via dropdown)
- Link Principal to school during school creation/editing
- Review and approve pending user registrations
- Role-based Access Control management
- System Settings control\n- **Enhanced User Management Interface**:
  - View and manage users with status-based button navigation at top of page
  - Three clickable status buttons displayed prominently:\n    - **Pending: [count]** (Orange button) - Click to view pending users awaiting approval, with Approve action available
    - **Active: [count]** (Green button) - Click to view active approved users, with Edit and Suspend actions available
    - **Suspended: [count]** (Red button) - Click to view suspended user accounts, with Edit action available
  - Clicking each button filters and displays corresponding user list below
  - Each button shows real-time count of users in that status
  - **Button Actions**: Each status button includes relevant action buttons (Approve for Pending, Edit and Suspend for Active, Edit for Suspended)
  - **Enhanced Search and Filter for Active Users**:
    - Text search bar for searching by username, full name, or email
    - Additional dropdown filters:\n      - Role filter (dropdown with options: All, Admin, Principal, Teacher, Student)
      - School Name filter (dropdown populated from School Master list, with'All Schools' option)
    - Combined search capability (text search + role filter + school name filter)
    - Real-time filtering as user types or selects filter options
    - Clear filters button to reset all search and filter criteria
    - Filter options displayed prominently above the Active Users table
    - **Filtered Records Count Display**: Display the count of filtered records prominently above the Active Users table (e.g., 'Showing 5 of 20 users' or 'Filtered Results: 5')
- Edit user profiles with Save button
- Suspend user accounts with Suspend button
- Approve pending users with Approve button
- **Cross-school access**: Admin can view and manage all schools and users
- **Full management rights**: Create, edit, suspend, delete\n\n### 9.4 Principal Functions
- **Academic Management**:
  - Class creation\n  - Section creation
  - Subject creation (class-wise)
  - Lesson creation (subject-wise, **NEW FEATURE**)
  - Student class-section mapping
- **Teacher Management**:
  - View teacher accounts
  - Edit teacher profiles (via Edit button or pencil icon)
  - Teacher-subject-class-section mapping
  - View class-section overview with assigned teachers per subject
- **Student Management**:\n  - View students list with enhanced search (text search + Class and Section filters)
  - View student class-section assignments
- **Question Bank Management**:
  - Create questions with lesson-level tracking
  - View and edit all questions in the school
  - Access analytics dashboard\n- Edit own profile with Save button
- View school details (read-only)
- **School-based access**: All data and user lists filtered by assigned school
- **Visibility**: Can view teachers and students from assigned school only

### 9.5 Teacher Functions
- View assigned classes, sections, and subjects
- View students of assigned sections only
- **Question Bank Access**:
  - Create questions for assigned subjects and lessons
  - View and edit own questions
- Edit own profile with Save button
- View school details (read-only)\n- **School-based access**: All data and user lists filtered by assigned school
- **Visibility**: Can view students from assigned sections only (cannot view Principal or other teachers)

### 9.6 Student Functions
- View my class, section, subjects, and teachers
- View school name, address, and code in profile
- Edit own profile with Save button
- **School-based access**: Only see personal information from assigned school
- **Visibility**: Can only view their own profile details (cannot view other students, teachers, or Principal)

### 9.7 User Profile Management
- Edit button: Available for all users to modify their profile information (displayed as button or pencil icon)
- Save button: Saves changes made to profile information
- Approve button: Available only for Admin role to approve pending user registrations (integrated into Pending status button)
- Suspend button: Available only for Admin role to suspend user accounts (integrated into Active status button)\n- User status categories:
  - Pending Approval: New users awaiting admin approval, cannot login
  - Active: Approved users with full system access
  - Suspended: Users whose accounts have been suspended, cannot login
- **Status-based button navigation**: Admin views display three status buttons (Pending, Active, Suspended) at top of User Management page for quick filtering, with relevant actions integrated into each button
- Admin can filter and manage users based on their status by clicking corresponding button
- **School filtering**: Principal views show only teachers and students from their assigned school; Teacher views show only students from their assigned sections\n\n### 9.8 Principal Dashboard - Total Teachers Card Feature
- **Total Teachers Card**: Displays the total count of teachers in the Principal's assigned school
- **Click Functionality**: When Principal clicks on the'Total Teachers' card, the system opens a 'Teachers Management' page with tabbed interface
- **Data Fetching Rule**: \n  - Fetch all teachers using school_id (not logged-in user ID)
  - Display all teachers registered under the same school
  - Show complete teacher list regardless of which teacher is currently logged in
- **Teachers Management Page - Tab Structure**:
  - **Tab 1: Teachers List**\n    - Display Fields: Teacher Name, Subject, Phone Number\n    - **Edit Action**: Edit button or pencil icon for each teacher row
    - **Enhanced Search and Filter Functionality**:
      - Text search bar for searching by teacher name, phone number, or email
      - Additional dropdown filters:
        - Subject filter (dropdown showing all subjects in the school)
        - Status filter (dropdown with options: All, Active, Pending, Suspended)
      - Combined search capability (text search + subject filter + status filter)
      - Real-time filtering as user types or selects filter options
      - Clear filters button to reset all search and filter criteria
    - Enable sort functionality\n    - Display total count of teachers at the top\n  - **Tab 2: Active Teachers**
    - Display only teachers with 'Active' status
    - Same display fields and functionality as Tab 1
  - **Tab 3: Pending Teachers**
    - Display only teachers with 'Pending Approval' status
    - Same display fields and functionality as Tab 1\n  - **Tab 4: Suspended Teachers**
    - Display only teachers with 'Suspended' status
    - Same display fields and functionality as Tab 1\n  - **Tab 5: Teacher Assignment**
    - **Purpose**: Interface for Principal to assign teachers to subjects, classes, and sections
    - **Display Components**:
      - Teacher selection dropdown (filtered by school)
      - Subject selection dropdown (filtered by school subjects)
      - Class selection dropdown (filtered by school classes)
      - Section multi-select dropdown (filtered by selected class)
      - 'Assign' button to save the mapping
    - **Current Assignments Table**:
      - Columns: Teacher Name, Subject, Class, Sections (comma-separated), Actions (Edit/Delete)
      - Filter options by teacher, subject, or class
      - Search functionality
      - Sort functionality
    - **Assignment Rules**:
      - One teacher can be assigned to multiple subject-class-section combinations
      - Same teacher can teach different subjects to different classes
      - Multiple teachers can be assigned to same subject in different sections
    - **Edit Assignment**:
      - Click 'Edit' button to modify existing assignment
      - Pre-populate form with current assignment details
      - Save changes with 'Update' button
    - **Delete Assignment**:
      - Click 'Delete' button to remove teacher assignment
      - Confirmation dialog before deletion
- **Access Control**:
  - Only Principal/Headmaster can view and manage this interface
  - Teachers cannot view other teachers or access assignment interface
  - Data is school-wise, not user-wise
- **UX Requirements**:
  - Page header:'Teachers Management - [School Name]'
  - Tab navigation at the top of the page
  - Active tab highlighted with primary color
  - Responsive design for all screen sizes
  - Loading indicators during data fetch
  - Success/error messages for assignment operations
\n### 9.9 Principal Dashboard - Total Students Card Feature
- **Total Students Card**: Displays the total count of students in the Principal's assigned school
- **Click Functionality**: When Principal clicks on the 'Total Students' card, the system opens a 'Students List' page\n- **Data Fetching Rule**: 
  - Fetch all students using school_id (not logged-in user ID)
  - Display all students registered under the same school
  - Show complete student list regardless of which student is currently logged in
- **Students List Page - Display Fields**:
  - Student Name\n  - Class\n  - Phone Number
- **Enhanced Search Functionality**: 
  - Text search bar for searching by name, phone, or email
  - Additional dropdown filters for Class and Section
  - Combined search capability (text search + class filter + section filter)
- **Access Control**:
  - Only Principal/Headmaster can view this list
  - Teachers and Students cannot view this complete list
  - Data is school-wise, not user-wise\n- **UX Requirements**:\n  - Page header: 'All Students of This School'
  - Enable search functionality with class and section filters
  - Enable sort functionality
  - Display total count of students at the top of the page

### 9.10 Admin Dashboard - Updated Card Display
- **Admin Dashboard Cards**: The Admin Dashboard displays only two cards:
  - **Total Users**: Displays the total count of all users in the system
  - **Total Schools**: Displays the total count of all schools in the system
- **Implementation Notes**:
  - Remove all code related to exam-related metrics from AdminDashboard.tsx
  - Remove API calls for exam data\n  - Remove state variables for exam counts
  - Remove UI components displaying exam-related cards
  - Update dashboard layout to display only two cards in appropriate grid format

### 9.11 Landing Page - Updated Design
- **Login and Register Buttons Removed**: The Login and Register buttons previously displayed on the landing page hero section have been removed
- **Get Started Section Removed**: The 'Get Started Today' section with'Create Account' button has been removed from the landing page
- **Simplified Landing Page**: Landing page now focuses on system features and information without direct login/registration prompts
- **Access to Login/Register**: Users can access Login and Register pages through:\n  - Top navigation bar Login/Register links (if present)
  - Direct URL navigation\n  - Alternative entry points as designed
\n## 10. Language Support

### 10.1 UI Language\n- **UI Language: English Only**
- All user interface elements (buttons, menus, labels, navigation, forms, tables, headers, card titles, dashboard elements) will be displayed in English\n- This includes all management interfaces, dashboards, and system pages
- **Strict Enforcement**: No UI text should appear in Tamil or any other language; all interface elements must be in English
\n### 10.2 Chat/Communication Language
- Users can communicate in any language they prefer for chat, messages, or communication features
- Chat language is flexible and not restricted to English
\n### 10.3 Language Rule Summary
- **UI = Always English**
- **Chat/Communication = Any Language**
\n## 11. Future Scope Features

### 11.1 Audit Logs
- User activity logging\n- Track who did what and when
- School-based activity filtering
\n### 11.2 Backup & Restore
- School data backup
- User data backup (school-wise)
- Restore functionality

### 11.3 Notifications
- New user registration notifications for Admin
- School-related updates
- Password reset confirmation notifications

### 11.4 Analytics Dashboard
- User activity analysis (school-wise)
- Teacher-student mapping analysis (school-wise)
- School-wise statistics comparison (Admin only)
- Board/Affiliation-wise comparison (Admin only)
- **Lesson-Level Performance Analytics**:
  - Lesson-wise accuracy of students
  - Lesson-wise difficulty analysis
  - Question distribution by lesson
  - Student performance comparison across lessons
  - Class-wise lesson performance trends

## 12. Design Style\n
### 12.1 Color Scheme
- Primary color: Blue (#2563EB) - conveys trust and educational appearance
- Secondary color: Green (#10B981) - for success and positive actions
- Warning color: Red (#EF4444) - for errors and warnings
- Pending status color: Orange (#F59E0B) - for pending approval indication
\n### 12.2 Visual Details
- Soft rounded corners (8px radius) - modern and friendly appearance
- Subtle shadow effects - depth and hierarchy perception
- Clear borders - for content sections\n\n### 12.3 Overall Layout
- Side panel navigation - fixed left sidebar (240px width) with collapsible toggle button
- **Admin Navigation Menu Items:**
  - Dashboard (with grid icon)
  - User Management (with users icon)
  - School Management (with building icon)
  - System Settings (with gear icon)
- **Principal Navigation Menu Items:**
  - Dashboard\n  - Academic (school-filtered) - with sub-menu: Class Creation, Section Creation, Subject Creation, Lesson Creation, Student Mapping
  - Teachers (school-filtered) - with sub-menu: Teacher Accounts, Teacher-Subject-Class-Section Mapping, Class-Section Overview
  - Students (school-filtered)\n  - Question Bank (school-filtered)
  - Profile Settings\n- **Teacher Navigation Menu Items:**
  - Dashboard
  - Assigned Classes\n  - Assigned Sections\n  - Assigned Subjects\n  - Students (section-filtered)
  - Question Bank (subject-filtered)
  - Profile Settings
- **Student Navigation Menu Items:**
  - Dashboard
  - My Class
  - My Section
  - My Subjects
  - My Teachers\n  - Profile Settings
- Card-based design - for information grouping in main content area
- Responsive grid layout - for various screen sizes
- Main content area adjusts dynamically based on side panel state (collapsed/expanded)
- **Admin User Management Interface**: Status-based button navigation at top of page showing three clickable buttons (Pending: [count], Active: [count], Suspended: [count]) with integrated action buttons (Approve for Pending, Edit and Suspend for Active, Edit for Suspended), plus search and filter options (text search + Role filter + School Name filter) for Active Users section, with filtered records count displayed prominently above the Active Users table
- School management interface with create, edit, and view options
- Password reset page with clean form layout and clear instructions
- **School-based filtering indicators**: Visual badges or labels showing current school context for non-Admin users
- **Principal Dashboard Cards**: Four main clickable cards (Academic Management, Teachers, Students, Question Bank) that open respective management interfaces, all displayed in English\n- **Academic Management Interface**: Step-by-step workflow for Class Creation → Section Creation → Subject Creation → Lesson Creation → Student Mapping\n- **Teacher-Subject-Class-Section Mapping Interface**: Interactive mapping interface with dropdown selections and visual confirmation\n- **Teachers Management Page**: Tabbed interface with five tabs (Teachers List, Active Teachers, Pending Teachers, Suspended Teachers, Teacher Assignment), with Edit button or pencil icon for each teacher row, plus enhanced search and filter options (text search + Subject filter + Status filter) in Teachers List tab\n- **Teacher Assignment Tab**: Form-based interface with dropdowns for teacher, subject, class, and section selection, plus table showing current assignments\n- **Admin Dashboard Layout**: Two-card grid layout displaying Total Users and Total Schools cards only
- **Students List Page**: Enhanced search interface with text search bar and additional Class and Section dropdown filters\n- **Registration Form**: School Name field displayed as dropdown populated from School Master list\n- **Landing Page**: Simplified design with Login/Register buttons and Get Started section removed
- **Pending Users Display**: School Name column in Pending Users section displays the actual school name selected during registration
- **Question Bank Interface**: \n  - Question creation form with cascading dropdowns (Class → Subject → Lesson)\n  - All four option fields displayed simultaneously for Multiple Choice questions
  - Form persistence fix: Class and Subject remain populated after submission
  - Question list view with lesson-level filtering
  - Analytics dashboard with lesson performance metrics
\n## 13. Reference Images
1. screenshot.png - Admin dashboard interface showing side panel navigation with Dashboard and User Management menu items
2. screenshot.png - User management interface showing status-based button navigation (Pending, Active, Suspended) with annotation indicating action buttons should be integrated into status buttons and search/filter options for Role and School Name, plus filtered records count display requirement
3. screenshot.png - Login page interface with username, password fields and Forgot Password link
4. screenshot.png - School edit form showing school information fields including name, address, contact details, affiliation, class range, and subjects
5. screenshot.png - Principal dashboard showing Tamil text with annotation'need all UNI in english' indicating requirement for English-only UI
6. screenshot.png -'All Students of This School' page with students list and annotation requesting additional search filters for Class and Section
7. 1000478423.jpg - Error message showing'Could not find a relationship between questions and subjects in the schema cache' on Question Bank page (resolved by adding lesson_id foreign key and proper schema relationships)
8. screenshot.png - Question creation form showing field order and annotation requesting all four options to be displayed simultaneously
9. screenshot.png - Question creation form showing form persistence issue with annotation requesting Class and Subject fields to remain populated after submission